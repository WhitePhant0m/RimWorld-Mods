<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <!-- Android Tiers -->
  <Operation Class="PatchOperation.FindModByID">
    <mods>
      <li>atlas.androidtiers</li>
    </mods>
    <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>/Defs/HediffDef[defName = "FractalPillAndroid"]/stages/li/mentalStateGivers</xpath>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>/Defs/HediffDef[defName = "FractalPillAndroid"]/stages/li/hungerRateFactorOffset</xpath>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>/Defs/HediffDef[defName = "FractalPillAndroid"]/stages/li/statOffsets/MentalBreakThreshold</xpath>
        </li>
        <!--
      <li Class="PatchOperationReplace">
        <xpath>/Defs/HediffDef[defName = "FractalPillAndroid"]/maxSeverity</xpath>
        <value>
          <maxSeverity>1.05</maxSeverity>
        </value>
      </li>
      -->
      </operations>
    </match>
  </Operation>

  <!-- Medieval Overhaul -->
  <Operation Class="PatchOperation.FindModByID">
    <mods>
      <li>DankPyon.Medieval.Overhaul</li>
    </mods>
    <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationReplace">
          <xpath>/Defs/ThingDef[defName = "DankPyon_IronIngot"]/stuffProps/statFactors/Flammability</xpath>
          <value>
            <Flammability>0.0</Flammability>
          </value>
        </li>
      </operations>
    </match>
  </Operation>

  <!-- Run & Hide
  <Operation Class="PatchOperation.FindModByID">
    <mods>
      <li>mlie.runandhide</li>
    </mods>
    <match Class="PatchOperationInsert">
      <xpath>/Defs/ThingDef[defName = "BunkerSpot"]/canOverlapZones</xpath>
      <value>
        <canOverlapZones>True</canOverlapZones>
      </value>
    </match>
  </Operation>-->

  <!-- Deep Stroage -->
  <Operation Class="PatchOperation.FindModByID">
    <mods>
      <li>lwm.deepstorage</li>
    </mods>
    <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>/Defs/ThingDef/comps/li[@Class = "LWM.DeepStorage.Properties"]/maxTotalMass</xpath>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>/Defs/ThingDef/comps/li[@Class = "LWM.DeepStorage.Properties"]/maxMassOfStoredItem</xpath>
        </li>
      </operations>
    </match>
  </Operation>

  <!-- Quality Doors fixes
  <Operation Class="PatchOperation.FindModByID">
    <mods>
      <li>stevezero.qualitydoors</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <Operation Class="PatchOperation.FindModByID">
          <mods>
            <li>jecrell.doorsexpanded</li>
          </mods>
          <match Class="PatchOperationSequence">
            <operations>
              <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[@Name="HeronDoorBase"]</xpath>
                <value>
                  <minifiedDef>MinifiedThing</minifiedDef>
                  <thingCategories>
                    <li>Buildings</li>
                  </thingCategories>
                </value>
              </li>
              <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[@Name="HeronDoorBase"]</xpath>
                <value>
                  <statBases>
                    <Mass>75</Mass>
                  </statBases>
                </value>
              </li>
              <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[@Name="AbstractHeronDoorBase"]/comps</xpath>
                <value>
                  <li>
                    <compClass>CompQuality</compClass>
                  </li>
                </value>
              </li>
            </operations>
          </match>
        </Operation>
      </operations>
    </match>
  </Operation>-->

  <!-- WOOD -->
  <Operation Class="PatchOperationRemove">
    <xpath>/Defs/ThingDef[defName="WoodLog"]/tools</xpath>
  </Operation>

  <Operation Class="PatchOperationAttributeSet">
    <xpath>/Defs/ThingDef[defName="WoodLog"]</xpath>
    <attribute>ParentName</attribute>
    <value>ResourceBase</value>
  </Operation>

  <!-- BEER -->
  <Operation Class="PatchOperationRemove">
    <xpath>/Defs/ThingDef[defName="Beer"]/tools</xpath>
  </Operation>

  <Operation Class="PatchOperationRemove">
    <xpath>/Defs/ThingDef[defName="Beer"]/comps/li[compClass="CompEquippable"]</xpath>
  </Operation>

  <!-- Always on SunLamps -->
  <Operation Class="PatchOperationRemove">
    <xpath>/Defs/ThingDef/comps/li[@Class="CompProperties_Schedule"]/offMessage[text()="Off for plant resting period"]..</xpath>
  </Operation>
</Patch>